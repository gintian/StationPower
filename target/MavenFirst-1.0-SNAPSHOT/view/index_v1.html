<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--360浏览器优先以webkit内核解析-->


    <title>智能电网通信大数据分析系统首页</title>

    <link rel="shortcut icon" href="favicon.ico"> <link href="css/bootstrap.min.css?v=3.3.5" rel="stylesheet">
    <link href="css/font-awesome.min.css?v=4.4.0" rel="stylesheet">

    <link href="css/animate.min.css" rel="stylesheet">
    <link href="css/style.min.css?v=4.0.0" rel="stylesheet">

</head>

<body class="gray-bg">

<div class="row">
    <div class="col-sm-12">
        <div class="ibox">
            <div class="ibox-content text-center">
                <h1 class="m-b-xxs"><b>数据质量</b></h1>
            </div>
            <div class="white-bg dashboard-header">
                <h2>1.研究目标</h2>
                <p>解决国家电网通信管理系统(TMS)中普遍存在的账物与实物不一致的问题，自动发现账与物不一致、物与账不一致；
                    发现数据录入的错误和存在的缺失数据；清理TMS中大量僵尸垃圾表格。</p>
                <br>
                <h2>2.研究内容</h2>
                <p>以TMS中站点承担的重要业务数量记录缺失、通道类型数据、业务类型数据等作为切入点，寻找一种模型，
                    找到相应的异常数据，并对其进行纠正。之后，将此模型扩展为一种通用的模型，用于信息系统数据库数据质量的提升。
                    主要研究内容包括：相关数据特征的提取；通过学习模型对异常数据进行拟合；通过模型优化对异常数据进行处理。</p>
            </div>
        </div>
    </div>
</div>


<div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>模型流程图</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="graph_flot.html#">选项1</a>
                            </li>
                            <li><a href="graph_flot.html#">选项2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div style="height:480px" id="dataFlow"></div>
                </div>
            </div>
        </div>
    </div>



<div class="row">
    <div class="col-sm-12">
        <div class="ibox">
            <div class="ibox-content text-center">
                <h1 class="m-b-xxs"><b>设备画像</b></h1>
            </div>
            <div class="white-bg dashboard-header">
                <h2>1.研究目标</h2>
                <p>通过设备画像实现对不同厂家设备质量的定量度量，对设备可靠性进行评价，为设备集采提供科学的数据支撑，
                    为设备全寿命周期管理及运维策略优化提供数据支撑，减轻网络管理和维护的负担。</p>
                <br>
                <h2>2.研究内容</h2>
                <p>设备画像专题主要以各省历史告警数据以及设备属性数据为基础，研究内容如下： 首先，在数据准备阶段，
                    根据设备属性数据建立数据关联关系，针对原始告警记录特点制定对应过滤策略。其次，结合TMS网络系的特点，
                    选择威布尔分布作为概率理论模型，建立了设备故障率的预测模型并对模型进行了检验。除此之外，
                    还对设备固有属性（如厂家差异、型号差异等）以及运行属性（如机房温度、设备端口占用率、使用年限等）
                    与设备故障之间的关系进行了数据挖掘。</p>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-6">
        <div class="ibox float-e-margins">
        <div class="ibox-title">
            <h5>设备告警数据清理步骤</h5>
            <div class="ibox-tools">
                <a class="collapse-link">
                    <i class="fa fa-chevron-up"></i>
                </a>
                <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                    <i class="fa fa-wrench"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="graph_flot.html#">选项1</a>
                    </li>
                    <li><a href="graph_flot.html#">选项2</a>
                    </li>
                </ul>
                <a class="close-link">
                    <i class="fa fa-times"></i>
                </a>
            </div>
        </div>
        <div class="ibox-content">
            <br>
            <div class="alert alert-success">
                <b >1、设置历史告警记录</b>
            </div>

            <div class="alert alert-info">
                <b>2、根据专家标定告警原因筛选出工作记录</b>
            </div>

            <div class="alert alert-success">
                <b >3、过滤同时发生的重复无效故障</b>
            </div>

            <div class="alert alert-info">
                <b>4、根据时间间隔合并闪频故障</b>
            </div>
            <div class="alert alert-success">
                <b>&nbsp</b>
            </div>

        </div>
    </div>
    </div>
    <div class="col-sm-6">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>设备故障率预测步骤</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="graph_flot.html#">选项1</a>
                        </li>
                        <li><a href="graph_flot.html#">选项2</a>
                        </li>
                    </ul>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <br>
                <div class="alert alert-success">
                    <b >1、建立威布尔分布故障概率预测模型</b>
                </div>

                <div class="alert alert-info">
                    <b>2、累计失效概率函数薇布尔转换成线性</b>
                </div>

                <div class="alert alert-success">
                    <b >3、中位秩公式计算累计失效概率</b>
                </div>

                <div class="alert alert-info">
                    <b>4、最小二乘计算参数估计</b>
                </div>

                <div class="alert alert-success">
                    <b>5、得到设备故障概率预测函数</b>
                </div>

            </div>
        </div>
    </div>

</div>

<div class="row">
    <div class="col-sm-12">
        <div class="ibox">
            <div class="ibox-content text-center">
                <h1 class="m-b-xxs"><b>业务可靠性</b></h1>
            </div>
            <div class="white-bg dashboard-header">
                <h2>1.研究目标</h2>
                <p>通过专家推荐和相关性分析的方法，找到了与站点业务数量相关的一些特征，包括站点类型、电压等级、调度等级、站点建成年限、站点在拓扑图中的中心度、站点中光传输设备数量、站点所属系统以及一些组合特征。分析发现，站点类型与业务数量相关性最强，不同类型站点业务数量相差显著。</p>
                <br>
                <h2>2.研究内容</h2>
                <p>通过专家推荐和相关性分析的方法，找到了与站点业务数量相关的一些特征，包括站点类型、电压等级、调度等级、站点建成年限、站点在拓扑图中的中心度、站点中光传输设备数量、站点所属系统以及一些组合特征。分析发现，站点类型与业务数量相关性最强，不同类型站点业务数量相差显著。</p>

            </div>
        </div>
    </div>

</div>
<div class="row">
    <div class="col-sm-12">
        <div class="ibox">
            <div class="ibox-title">
                <h5>业务可靠性影响因素</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="graph_flot.html#">选项1</a>
                        </li>
                        <li><a href="graph_flot.html#">选项2</a>
                        </li>
                    </ul>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="white-bg dashboard-header">
                <div id='div1' style='width: 100%;height: 500px;margin: 10px;padding: 20px;'></div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-12">
        <div class="ibox">
            <div class="ibox-content text-center">
                <h1 class="m-b-xxs"><b>通信优化网</b></h1>
            </div>
            <div class="white-bg dashboard-header">
                <h2>1.研究目标</h2>
                <p>通过专家推荐和相关性分析的方法，找到了与站点业务数量相关的一些特征，包括站点类型、
                    电压等级、调度等级、站点建成年限、站点在拓扑图中的中心度、站点中光传输设备数量、
                    站点所属系统以及一些组合特征。分析发现，站点类型与业务数量相关性最强，
                    不同类型站点业务数量相差显著。</p>
                <br>
                <h2>2.研究内容</h2>
                <p>通过专家推荐和相关性分析的方法，找到了与站点业务数量相关的一些特征，包括站点类型、
                    电压等级、调度等级、站点建成年限、站点在拓扑图中的中心度、站点中光传输设备数量、
                    站点所属系统以及一些组合特征。分析发现，站点类型与业务数量相关性最强，不同类型站
                    点业务数量相差显著。</p>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-6">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>通信网优化成果</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="graph_flot.html#">选项1</a>
                        </li>
                        <li><a href="graph_flot.html#">选项2</a>
                        </li>
                    </ul>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <br>
                <div class="alert alert-success">
                    <p><b >1、扩充：</b>综合考虑端口占用率、历年业务增长、承载业务的级别、数量和光纤占用率
                        ，预测站点和光缆扩容的紧迫性</p>
                </div>

                <div class="alert alert-info">
                    <p><b >2、可视化展示：</b>以江西为例子，站点按照地理位置布局运用热力图表示资源的紧张程度&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                </div>

                <div class="alert alert-success">
                    <p><b >3、路径分配：</b>综合考虑站点可靠性、光缆可靠性、端口占用率和光缆占用率等多个因素，
                        为业务分配多条可靠性搞的路径</p>
                </div>
                <br>

            </div>
        </div>
    </div>
    <div class="col-sm-6">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>可视化示例-江西省站点分布图</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="graph_flot.html#">选项1</a>
                        </li>
                        <li><a href="graph_flot.html#">选项2</a>
                        </li>
                    </ul>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <div id="main" style="width:100%;height: 300px"></div>
            </div>
        </div>
    </div>
</div>


    <script src="S_js/echarts.js"></script>
    <script src="js/content.min.js?v=1.0.0"></script>
    <script src="js/jquery.min.js?v=2.1.4"></script>
    <script src="js/bootstrap.min.js?v=3.3.5"></script>
    <script src="js/plugins/layer/layer.min.js"></script>
    <script src="js/content.min.js"></script>
    <script src="js/welcome.min.js"></script>
    <script src="S_js/jiangxi.js"></script>
    <script src="S_js/china.js"></script>
</body>

<script type="text/javascript">
    /*
	 * 模型流程图
	 */
    var myChart1 = echarts.init(document.getElementById('dataFlow'));
    option = {
        title: {
            text: '模型流程图'
        },
        tooltip: {},
        animationDurationUpdate: 1500,
        animationEasingUpdate: 'quinticInOut',
        series : [
            {
                type: 'graph',
                layout: 'none',
                symbolSize: 70,
                //roam: true,
                label: {
                    normal: {
                        show: true
                    }
                },
                edgeSymbol: ['circle', 'arrow'],
                edgeSymbolSize: [4, 10],
                edgeLabel: {
                    normal: {
                        textStyle: {
                            fontSize: 15
                        }
                    }
                },
                data: [
                    {name: 'TMS数据库',x: 0,y: 250},
                    {name: '站点类型',x: 150,y: 100},
                    {name: '拓扑结构',x: 150,y: 200},
                    {name: '设备数量',x: 150,y: 300},
                    {name: '其他特征',x: 150,y: 400},

                    {name: '异常站点',x: 300,y: 250},
//                    {name: '异常等级',x: 300,y: 300},
                    {name: '现场验证',x: 500,y: 100},
                    {name: '案例跟踪',x: 500,y: 400},

                ],
                // links: [],
                links: [
                    {source: 'TMS数据库',target: '站点类型',label: {normal: {show: true,formatter: '特征工程'}}},
                    {source: 'TMS数据库',target: '拓扑结构',label: {normal: {show: true,formatter: '特征工程'}}},
                    {source: 'TMS数据库',target: '设备数量',label: {normal: {show: true,formatter: '特征工程'}}},
                    {source: 'TMS数据库',target: '其他特征',label: {normal: {show: true,formatter: '特征工程'}}},
                    {source: '站点类型',target: '异常站点',label: {normal: {show: true,formatter: '模型训练'}}},
//                    {source: '站点类型',target: '异常等级'},
                    {source: '拓扑结构',target: '异常站点',label: {normal: {show: true,formatter: '模型训练'}}},
//                    {source: '拓扑结构',target: '异常等级'},
                    {source: '设备数量',target: '异常站点',label: {normal: {show: true,formatter: '模型训练'}}},
//                    {source: '设备数量',target: '异常等级'},
                    {source: '其他特征',target: '异常站点',label: {normal: {show: true,formatter: '模型训练'}}},
//                    {source: '其他特征',target: '异常等级'},
//                    {source: '异常站点',target: '现场验证'},
//                    {source: '异常等级',target: '案例跟踪'},
//                    {source: '异常站点',target: '现场验证'},
//                    {source: '异常等级',target: '案例跟踪'},

                    {source: '现场验证',target: '异常站点',label: {normal: {show: true,formatter: '反馈优化'}},lineStyle: {normal: { curveness: 0.4 }}},
                    {source: '异常站点',target: '现场验证',lineStyle: {normal: { curveness: 0.2 }}},
                    {source: '案例跟踪',target: '异常站点',label: {normal: {show: true,formatter: '反馈优化'}},lineStyle: {normal: { curveness: 0.4 }}},
                    {source: '异常站点',target: '案例跟踪',lineStyle: {normal: { curveness: 0.2 }}},


                         ],
                lineStyle: {
                    normal: {
                        opacity: 0.9,
                        width: 2,
                        curveness: 0
                    }
                }
            }
        ]
    };
    myChart1.setOption(option);
    $(window).resize(myChart1.resize);

    /*
     *业务可靠性影响因素
     */
    var myChart = echarts.init(document.getElementById('div1'));
    option = {
//        title: {
//            text: '承载某业务的通道的拓扑结构',
//            left: 'center'
//        },
        series: [
            {
                type: "graph",
                layout: "force",
                symbol: "circle",
                symbolSize: 50,
                roam: true,
                force: {
                    repulsion: 800
                },
                label: {
                    normal: {
                        show: true,
                        position: "inside",
                        textStyle: {
                            fontSize: 12
                        }
                    }
                },
                lineStyle: {
                    normal: {
                        color: "gray",
                        width: 2,
                        opacity: 0.8
                    }
                },
                edgeSymbolSize: [10, 50],
                categories: [{
                    name: "一级",
                    label: {
                        normal:{
                            fontSize: 16
                        }
                    },
                    itemStyle: {
                        normal: {
                            symbolSize: 130,
                            color: "#FF6A6A",
                            borderColor: "",
                            shadowBlur: "",
                            shadowColor: "",
//                            opacity: 0.8
                        }
                    }
                },{
                    name: "二级",
                    symbolSize: 95,
                    label: {
                        normal:{
                            fontSize: 14
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: "#4169E1",
                            borderColor: "",
                            shadowBlur: "",
                            shadowColor: "",
                            opacity: 0.8
                        }
                    }
                },{
                    name: "三级",
                    symbolSize: 75,
                    label: {
                        normal:{
                            fontSize: 12
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: "#1E90FF",
                            borderColor: "",
                            shadowBlur: "",
                            shadowColor: "",
                            opacity: 0.8
                        }
                    }
                },{
                    name: "四级",
                    symbolSize: 55,
                    label: {
                        normal:{
                            fontSize: 10,
                            color: "#4F4F4F",
                            fontWeight: "bolder"
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: "#87CEFA",
                            borderColor: "",
                            shadowBlur: "",
                            shadowColor: "",
                            opacity: 0.8
                        }
                    }
                }],
                data: [{
                    name: "业务可靠性",
                    category: 0,
                    symbolSize : 130,
                    draggable: true
                },{
                    name: "设备可靠性",
                    symbolSize : 95,
                    category: 1,
                    draggable: true
                },{
                    name: "传输介质可靠性",
                    symbolSize : 95,
                    category: 1,
                    draggable: true
                },{
                    name: "拓扑结构可靠性",
                    symbolSize : 95,
                    category: 1,
                    draggable: true
                },{
                    name: "生产厂家",
                    symbolSize : 75,
                    category: 2,
                    draggable: true
                },{
                    name: "设备型号",
                    symbolSize : 75,
                    category: 2,
                    draggable: true
                },{
                    name: "使用年限",
                    symbolSize : 75,
                    category: 2,
                    draggable: true
                },{
                    name: "机房环境",
                    symbolSize : 75,
                    category: 2,
                    draggable: true
                },{
                    name: "站点环境",
                    symbolSize : 75,
                    category: 2,
                    draggable: true
                },{
                    name: "设备负载",
                    symbolSize : 75,
                    category: 2,
                    draggable: true
                },{
                    name: "湿度",
                    symbolSize : 55,
                    category: 3,
                    draggable: true
                },{
                    name: "温度",
                    category: 3,
                    symbolSize : 55,
                    draggable: true
                },{
                    name: "地质",
                    symbolSize : 55,
                    category: 3,
                    draggable: true
                },{
                    name: "气象",
                    symbolSize : 55,
                    category: 3,
                    draggable: true
                },{
                    name: "市政数据",
                    symbolSize : 55,
                    category: 3,
                    draggable: true
                },{
                    name: "光缆类型",
                    symbolSize : 55,
                    category: 3,
                    draggable: true
                }],
                links: [{
                    source: "业务可靠性",
                    target: "设备可靠性"
                },{
                    source: "业务可靠性",
                    target: "传输介质可靠性"
                },{
                    source: "业务可靠性",
                    target: "拓扑结构可靠性"
                },{
                    source: "设备可靠性",
                    target: "生产厂家"
                },{
                    source: "设备可靠性",
                    target: "设备型号"
                },{
                    source: "设备可靠性",
                    target: "使用年限"
                },{
                    source: "设备可靠性",
                    target: "机房环境"
                },{
                    source: "设备可靠性",
                    target: "设备负载"
                },{
                    source: "设备可靠性",
                    target: "站点环境"
                },{
                    source: "机房环境",
                    target: "温度"
                },{
                    source: "机房环境",
                    target: "湿度"
                },{
                    source: "站点环境",
                    target: "气象"
                },{
                    source: "站点环境",
                    target: "地质"
                },{
                    source: "传输介质可靠性",
                    target: "光缆类型"
                },{
                    source: "传输介质可靠性",
                    target: "市政数据"
                }]
            }
        ]
    };
    myChart.setOption(option);



    /*
	 * 江西站点分布图（扩容预测）
	 */
    var myChart = echarts.init(document.getElementById('main'));
    // 每个站点的GIS数据
    var geoCoordMap = {
        '220kV垱岭变':[117.12,28.97],
        '220kV上饶变':[117.85,28.43],
        '220kV茅家岭变':[117.99,28.43],
        '220kV渝水变':[114.930835,27.810834],
        '上饶供电公司':[117.97,28.50],
        '500kV罗坊变':[114.93,27.8],
        '500kV赣州变':[115.0,25.87],
        '500kV乐平变':[117.21,28.97],
        '220kV斗门变':[115.93,28.55],
        '220kV龙岗变':[115.82,28.7],
        '500kV文山变':[114.98,27.12],
        '500kV南昌变':[115.85,28.68],
        '110kV沙土变':[114.93,27.78],
        '500kV梦山变':[115.53,28.07],
        '赣东北供电公司':[117.12,28.90],
        '220kV金子山变':[117.07,28.7],
        '集控中心':[114.38,28.1],
        '220kV石滩变':[115.78,28.2],
        '220kV渡口变':[114.93,25.87],
        '220kV铜城变':[117.22,28.28],
        '500kV马回岭变':[115.88,29.62],
        '220kV王源变':[117.95,28.40],
        '南昌供电公司':[115.75,28.5],
        '220kV嘉定变':[114.93,25.38],
        '江西省电力公司':[115.95,28.68],
        '500kV信州变':[117.95,28.43],
        '220kV燕丰变':[114.93,25.83],
        '220kV康乐变':[114.43,28.20],
        '220kV高新变':[117.12,28.7],
        '220kV流口变':[117.10,28.28],
        '220kV清江变':[116.53,27.22],
        '220kV袁州变':[114.38,27.8],
        '500kV永修变':[115.8,29.03],
        '220kV信和变':[114.25,27.8],
        '500kV石钟山变':[116.22,29.73],
        '220kV龟峰变':[117.43,28.4],
        '220kV百乐变':[115.03,24.78],
        '500kV抚州变':[116.35,28.0],
        '500kV孔目江变':[114.83,27.8],
        '500kV安源变':[113.87,27.65],
        '500kV雷公山变':[114.78,24.92],
        '220kV吉安变':[114.85,27.12],
        '220kV妙智变':[115.98,29.68],
        '220kV荷舍变':[114.78,28.38],
        '220kV西郊变':[115.73,28.72],
        '220kV玉山变':[118.25,28.68],
        '220kV竹航山变':[118.18,28.43],
        '赣西供电公司':[114.92,27.82],
        '220kV上高变':[114.92,28.23],
        '220kV李家变':[117.25,29.37],
        '220kV官上变':[117.92,28.43],
        '220kV祥符变':[115.37,28.42],
        '220kV德兴变':[117.57,28.95],
        '220kV葛山变':[115.13,27.22],
        '220kV跑马坪变':[113.73,27.65],
        '110kV沈家岭变':[117.12,28.99]
    };

    // 各个站点的相关属性
    var station = [
        {name:'220kV垱岭变',businessNum:212,kuorong:0.75},
        {name:'220kV上饶变',businessNum:207,kuorong:0.67},
        {name:'220kV茅家岭变',businessNum:179,kuorong:0.67},
        {name:'220kV渝水变',businessNum:168,kuorong:0.79},
        {name:'上饶供电公司',businessNum:164,kuorong:0.3},
        {name:'500kV罗坊变',businessNum:153,kuorong:0.98},
        {name:'500kV赣州变',businessNum:147,kuorong:0.68},
        {name:'500kV乐平变',businessNum:141,kuorong:0.58},
        {name:'220kV斗门变',businessNum:134,kuorong:0.94},
        {name:'220kV龙岗变',businessNum:130,kuorong:0.67},
        {name:'500kV文山变',businessNum:128,kuorong:0.34},
        {name:'500kV南昌变',businessNum:127,kuorong:0.34},
        {name:'110kV沙土变',businessNum:119,kuorong:0.34},
        {name:'500kV梦山变',businessNum:119,kuorong:0.34},
        {name:'赣东北供电公司',businessNum:116,kuorong:0.67},
        {name:'220kV金子山变',businessNum:111,kuorong:0.89},
        {name:'集控中心',businessNum:110,kuorong:0.98},
        {name:'220kV石滩变',businessNum:102,kuorong:0.56},
        {name:'220kV渡口变',businessNum:100,kuorong:0.34},
        {name:'220kV铜城变',businessNum:98,kuorong:0.78},
        {name:'500kV马回岭变',businessNum:98,kuorong:0.56},
        {name:'220kV王源变',businessNum:98,kuorong:0.45},
        {name:'南昌供电公司',businessNum:98,kuorong:0.23},
        {name:'220kV嘉定变',businessNum:97,kuorong:0.69},
        {name:'江西省电力公司',businessNum:93,kuorong:0.49},
        {name:'500kV信州变',businessNum:93,kuorong:0.78},
        {name:'220kV燕丰变',businessNum:92,kuorong:0.63},
        {name:'220kV康乐变',businessNum:92,kuorong:0.85},
        {name:'220kV高新变',businessNum:92,kuorong:0.47},
        {name:'220kV流口变',businessNum:92,kuorong:0.67},
        {name:'220kV清江变',businessNum:92,kuorong:0.80},
        {name:'220kV袁州变',businessNum:92,kuorong:0.45},
        {name:'500kV永修变',businessNum:91,kuorong:0.76},
        {name:'220kV信和变',businessNum:90,kuorong:0.23},
        {name:'500kV石钟山变',businessNum:90,kuorong:0.49},
        {name:'220kV龟峰变',businessNum:89,kuorong:0.72},
        {name:'220kV百乐变',businessNum:88,kuorong:0.62},
        {name:'500kV抚州变',businessNum:88,kuorong:0.41},
        {name:'500kV孔目江变',businessNum:87,kuorong:0.49},
        {name:'500kV安源变',businessNum:87,kuorong:0.89},
        {name:'500kV雷公山变',businessNum:83,kuorong:0.50},
        {name:'220kV吉安变',businessNum:83,kuorong:0.68},
        {name:'220kV妙智变',businessNum:82,kuorong:0.46},
        {name:'220kV荷舍变',businessNum:80,kuorong:0.29},
        {name:'220kV西郊变',businessNum:80,kuorong:0.90},
        {name:'220kV玉山变',businessNum:80,kuorong:0.85},
        {name:'220kV竹航山变',businessNum:79,kuorong:0.78},
        {name:'赣西供电公司',businessNum:78,kuorong:0.48},
        {name:'220kV上高变',businessNum:78,kuorong:0.70},
        {name:'220kV李家变',businessNum:78,kuorong:0.49},
        {name:'220kV官上变',businessNum:78,kuorong:0.80},
        {name:'220kV祥符变',businessNum:78,kuorong:0.58},
        {name:'220kV德兴变',businessNum:77,kuorong:0.9},
        {name:'220kV葛山变',businessNum:77,kuorong:0.67},
        {name:'220kV跑马坪变',businessNum:77,kuorong:0.57},
        {name:'110kV沈家岭变',businessNum:20,kuorong:0.68}
    ];

    // 各个站点之间的连接情况
    var edges = [
        [{name:'220kV垱岭变'}, {name:'110kV沈家岭变',fiberOcc:0}],
        [{name:'220kV垱岭变'}, {name:'220kV上饶变',fiberOcc:0.8}],
        [{name:'220kV茅家岭变'}, {name:'上饶供电公司',fiberOcc:0.5}],
        [{name:'220kV斗门变'}, {name:'江西省电力公司',fiberOcc:0.8}],
        [{name:'220kV玉山变'}, {name:'220kV德兴变',fiberOcc:0.3}],
        [{name:'220kV百乐变'}, {name:'500kV雷公山变',fiberOcc:0.5}],
        [{name:'500kV南昌变'}, {name:'500kV马回岭变',fiberOcc:0.6}],
        [{name:'220kV上高变'}, {name:'500kV抚州变',fiberOcc:0.9}],
        [{name:'220kV袁州变'}, {name:'220kV葛山变',fiberOcc:0.2}],
        [{name:'赣东北供电公司'}, {name:'220kV流口变',fiberOcc:0.32}],
        [{name:'220kV竹航山变'}, {name:'220kV德兴变',fiberOcc:0.46}],
        [{name:'500kV罗坊变'}, {name:'220kV祥符变',fiberOcc:0.78}],
        [{name:'110kV沙土变'}, {name:'220kV官上变',fiberOcc:0.67}],
        [{name:'500kV石钟山变'}, {name:'220kV西郊变',fiberOcc:0.94}],
        [{name:'500kV孔目江变'}, {name:'500kV安源变',fiberOcc:0.12}],
        [{name:'220kV葛山变'}, {name:'500kV抚州变',fiberOcc:0.22}],
        [{name:'220kV荷舍变'}, {name:'220kV燕丰变',fiberOcc:0.54}],
        [{name:'220kV西郊变'}, {name:'500kV信州变',fiberOcc:0.67}],
        [{name:'220kV妙智变'}, {name:'220kV渡口变',fiberOcc:0.18}],
        [{name:'500kV乐平变'}, {name:'220kV清江变',fiberOcc:0.3}],
        [{name:'集控中心'}, {name:'上饶供电公司',fiberOcc:0.4}]
    ];

    //var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';

    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = geoCoordMap[dataItem[0].name];
            var toCoord = geoCoordMap[dataItem[1].name];
            if (fromCoord && toCoord) {
                res.push({
                    //fromName: dataItem[0].name,
                    //toName: dataItem[1].name,
                    name: "铅芯占用率",
                    coords: [fromCoord, toCoord],
                    value: dataItem[1].fiberOcc
                });
            }
        }
        return res;
    };

    var color = ['#a6c84c', '#ffa022', '#46bee9'];

    var series = [
        {//两个站点之间的连线
            type: 'lines',
            zlevel: 2,
            symbol: ['none', 'none'],
            symbolSize: 10,
            lineStyle: {
                normal: {
                    //color: '#a6c84c',
                    width: 1,
                    opacity: 0.6,
                    curveness: 0
                }
            },
            data: convertData(edges)
        },
        {//每个站点
            type: 'effectScatter',
            coordinateSystem: 'geo',
            zlevel: 2,
            rippleEffect: {
                brushType: 'stroke'
            },
            label: {
                normal: {
                    show: false,
                    position: 'right',
                    formatter: '{b}'
                }
            },
            //symbolSize: function (val) {
            //return val[2] / 8;
            //},
            symbolSize: 6,
            data: station.map(function (dataItem) {
                    return {
                        name: dataItem.name+' , 业务数：'+dataItem.businessNum+'，扩容迫切性：'+dataItem.kuorong,
                        value: geoCoordMap[dataItem.name].concat([dataItem.kuorong])
                    };
                }
            )
        }
    ];

    option = {
        //backgroundColor: '#003',//#404a59
        title : {
            text: '江西',
            subtext: '站点分布图',
            left: 'center',
            textStyle : {
                color: '#404a59'
            }
        },
        tooltip : {
            trigger: 'item',
            formatter: function (params) {
                if(params.name.indexOf("铅芯占用率") == -1)
                    return params.name;
                else
                    return params.name+ ' : ' + params.value;
            }
        },
        toolbox:{
            show:true,
            feature:{
                mark:{show:!0},
                //dataView:{show:!0,readOnly:!1},
                restore:{show:!0},
                saveAsImage:{show:!0}
            }
        },
        visualMap: [
            {
                min: 0,
                max: 1,
                text:['高','低'],
                precision:2,
                calculable: true,
                top:'center',
                inRange: {
                    color: ['#50a3ba', '#eac736', '#d94e5d']
                },
                textStyle: {
                    color: '#003'
                }
            }
        ],
        geo: {
            map: '江西',
            label: {
                emphasis: {
                    show: false
                }
            },
            roam: true,
            itemStyle: {
                normal: {
                    areaColor: '#323c48',
                    borderColor: '#ffefd5'//#ffefd5,#404a59
                },
                emphasis: {
                    areaColor: '#2a333d'
                }
            }
        },
        series: series
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
    $(window).resize(myChart.resize);
</script>
</html>